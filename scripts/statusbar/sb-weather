#!/bin/sh
# Weather — status2d blue (#83a598)

btn="${BUTTON:-${BLOCK_BUTTON:-0}}"

case "$btn" in
	1) notify-send "󰖐 Weather" "$(curl -fsS --max-time 5 'https://wttr.in/?format=3' 2>/dev/null || echo 'Unavailable')" ;;
	3) notify-send "󰖐 Weather" "Click: full forecast" ;;
	6) setsid -f "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

command -v curl >/dev/null 2>&1 || exit 0
weather="$(curl -fsS --max-time 2 'https://wttr.in/?format=%t+%C' 2>/dev/null || true)"
[ -n "$weather" ] || exit 0

printf "^c#83a598^󰖐 %s^d^" "$weather"
